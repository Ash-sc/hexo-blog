<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="React+Node.jsåœ¨çº¿å°è¯´é˜…è¯»å™¨"><meta name="keywords" content="react,nodejs"><meta name="author" content="Ash"><meta name="copyright" content="Ash"><title>React+Node.jsåœ¨çº¿å°è¯´é˜…è¯»å™¨ | å°±åœ¨è®°å¿†é‡Œç”»ä¸€ä¸ªçŒ¹ğŸ¦”</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1937033283561228',
  enable_page_level_ads: 'true'
});
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡†å¤‡å·¥ä½œ"><span class="toc-number">1.</span> <span class="toc-text">å‡†å¤‡å·¥ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#èµ„æºè·å–"><span class="toc-number">2.</span> <span class="toc-text">èµ„æºè·å–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‰ç«¯ç•Œé¢"><span class="toc-number">3.</span> <span class="toc-text">å‰ç«¯ç•Œé¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…³äºåŠ¨ç”»"><span class="toc-number">3.1.</span> <span class="toc-text">å…³äºåŠ¨ç”»</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img class="lazy" data-src="/img/avatar.jpg"></div><div class="author-info__name text-center">Ash</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/Ash-sc">Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">26</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">38</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">20</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">å°±åœ¨è®°å¿†é‡Œç”»ä¸€ä¸ªçŒ¹ğŸ¦”</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">React+Node.jsåœ¨çº¿å°è¯´é˜…è¯»å™¨</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2017-07-04</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Node/">Node</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Node/react/">react</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2017/07/04/react-node-online-reader/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2017/07/04/react-node-online-reader/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><meta name="generator" content="Hexo 3.8.0"><p>ä¸€ç›´æœ‰è¿½å°è¯´çš„ä¹ æƒ¯ã€‚å‰æ®µæ—¶é—´è¿è½½çš„å°è¯´éƒ½è¿½å®Œäº†ï¼Œä¹¦è’ä¹‹ä¸‹å°±ä¸‹äº†ä¸€ä¸ªâ€œä¹¦æ——å°è¯´â€æ¥çœ‹ä¸€äº›å·²ç»å®Œç»“çš„å°è¯´ã€‚å¥½å¤„å°±æ˜¯å¯ä»¥ä¸ç”¨åƒè¿½è¿è½½å°è¯´é‚£æ ·èŠ±é’±ï¼Œä¸è¿‡ä¹¦æ——Appç°åœ¨ä¹Ÿæ˜¯å„ç§å¹¿å‘Šäº†ï¼Œæ‰€ä»¥çœ‹å¾—å¾ˆæ˜¯è›‹ç–¼ã€‚é€šè¿‡ç½‘é¡µçœ‹çš„è¯ï¼Œå¹¿å‘Šä¹Ÿæ— æ³•é¿å…ï¼Œäºæ˜¯å°±æƒ³ç€å¯ä¸å¯ä»¥ç”¨Reactå’ŒNode.jsè‡ªå·±æ’¸ä¸€ä¸ªåœ¨çº¿çš„å°è¯´é˜…è¯»å™¨å‡ºæ¥ã€‚</p>
<p><a href="https://github.com/Ash-sc/online-reader/tree/master" target="_blank" rel="noopener">GitHubåœ°å€</a>ã€‚</p>
<a id="more"></a>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>é¦–å…ˆéœ€è¦æ„æ€ä¸€ä¸‹ï¼Œè¿™ä¸ªé˜…è¯»å™¨åº”è¯¥æ€ä¹ˆå®ç°ï¼Œç”¨ä»€ä¹ˆæ­¥éª¤æ¥å®ç°ã€‚</p>
<ol>
<li><p>å°è¯´çš„æ¥æºå¯ä»¥ä»åˆ«çš„ç½‘ç«™ä¸Šè·å–ï¼Œç”¨å®šå‘çˆ¬è™«å°±è¡Œã€‚</p>
</li>
<li><p>éƒ¨ç½²èµ·æ¥ä¸€å®šè¦ç®€å•ï¼Œä¸èƒ½å¤ªè¿‡å¤æ‚ã€‚</p>
</li>
<li><p>é¡µé¢çš„è¯ï¼Œæœç´¢åŠŸèƒ½å’Œç« èŠ‚åˆ—è¡¨åŠŸèƒ½æ˜¯å¿…é¡»çš„ã€‚</p>
</li>
<li><p>æœ€å¥½é˜…è¯»ç•Œé¢çš„èƒŒæ™¯è‰²å­—è‰²å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œå› ä¸ºä½¿ç”¨ç¯å¢ƒä¸ä¸€å®šï¼Œè¦æ˜¯èƒ½æ‰«æä¸ªäºŒç»´ç å°±èƒ½åœ¨æ‰‹æœºä¸Šçœ‹å°±æ›´å¥½äº†ã€‚</p>
</li>
<li><p>â€¦æš‚æ—¶æ²¡æƒ³åˆ°ã€‚</p>
</li>
</ol>
<p>OKï¼Œæ€è·¯æœ‰äº†ï¼Œå¼€å§‹ã€‚</p>
<p>æœåŠ¡ç«¯æ¥å£ï¼Œç²—ç•¥ä¼°è®¡æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ol>
<li><p>æœç´¢æ¥å£</p>
</li>
<li><p>è·å–ç« èŠ‚ä¿¡æ¯æ¥å£</p>
</li>
<li><p>è·å–ç« èŠ‚å†…å®¹æ¥å£</p>
</li>
</ol>
<p>å‰ç«¯æ¨¡å—ï¼Œå¯¹åº”çš„æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ol>
<li><p>æœç´¢æ¨¡å—ï¼ŒåŒ…å«æœç´¢æ¡†ä»¥åŠæœç´¢ç»“æœå±•ç¤º</p>
</li>
<li><p>ç« èŠ‚ä¿¡æ¯æ¨¡å—ï¼ŒåŒ…å«ç« èŠ‚åˆ—è¡¨å±•ç¤º</p>
</li>
<li><p>ç« èŠ‚å†…å®¹å±•ç¤ºæ¨¡å—ï¼ŒåŒ…å«ç« èŠ‚å†…å®¹å±•ç¤ºä»¥åŠä¸€äº›å°å·¥å…·</p>
</li>
</ol>
<h2 id="èµ„æºè·å–"><a href="#èµ„æºè·å–" class="headerlink" title="èµ„æºè·å–"></a>èµ„æºè·å–</h2><p>å…ˆä»èµ„æºçš„è·å–å¼€å§‹ï¼Œå› ä¸ºæƒ³è¦ä»£ç é‡å°½å¯èƒ½çš„å°‘ï¼Œè€Œæˆ‘è‡ªå·±æœ¬äººä¹Ÿæ˜¯å¯¹Node.jsçš„ç†Ÿæ‚‰ç¨‹åº¦è¶…è¿‡äº†Pythonï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯å†³å®šç”¨Nodeæ¥ä½œä¸ºæœåŠ¡ç«¯çˆ¬å–èµ„æºã€‚(ä½¿ç”¨superagentå’Œcheerioè¿™ä¸¤ä¸ªåŒ…)</p>
<p>è¡¡é‡äº†ä¸€ä¸‹å°è¯´ä¸­çš„é”™å­—å’Œæ’ç‰ˆï¼Œæœ€ç»ˆæˆ‘é€‰æ‹©äº†<a href="http://www.snwx8.com/" target="_blank" rel="noopener">http://www.snwx8.com/</a>è¿™ä¸ªç½‘ç«™æ¥ä½œä¸ºèµ„æºè·å–æ¥æºã€‚</p>
<p>å…ˆä»æœç´¢å¼€å§‹ï¼Œä½¿ç”¨äº†è¿™ä¸ªç½‘é¡µçš„æœç´¢åŠŸèƒ½æœç´¢äº†ä¸€æœ¬å°è¯´ä¹‹åï¼Œå‘ç°ç½‘é¡µè·³è½¬åˆ°äº†å¦å¤–ä¸€ä¸ªåä¸ºâ€search.phpâ€çš„å­é¡µé¢ï¼Œæœç´¢çš„å‚æ•°ä¹Ÿç›´æ¥æŒ‚åœ¨äº†urlåé¢ã€‚æ©ï¼Œè¿™æ ·å°±å¥½åŠäº†ï¼Œç›´æ¥ç”¨urlçˆ¬â€search.phpâ€è¿™ä¸ªé¡µé¢å°±è¡Œäº†ï¼Œæœç´¢å‚æ•°çš„è¯ï¼Œç”¨urlencodeæ–¹æ³•è½¬ä¹‰ä¸€ä¸‹å°±è¡Œã€‚</p>
<p>ï¼ˆè¿™é‡Œåœ¨å®ç°çš„è¿‡ç¨‹é‡åˆ°äº†ä¸€ä¸ªå‘ï¼šsuperagentæœ¬èº«æ˜¯åªèƒ½çˆ¬å–utf-8ç¼–ç çš„é¡µé¢çš„ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™çš„ç¼–ç æ˜¯gbkï¼Œæ‰€ä»¥è¿˜éœ€è¦å¼•å…¥å¦å¤–ä¸€ä¸ªåŒ…superagent-charsetï¼‰ã€‚</p>
<p>è·å–åˆ°äº†é¡µé¢çš„ä»£ç ï¼Œæ¥ä¸‹æ¥è¦åšçš„äº‹æƒ…å°±æ˜¯ä»é¡µé¢ä»£ç ä¸­è¿‡æ»¤å‡ºæˆ‘ä»¬éœ€è¦çš„å†…å®¹ï¼šå°è¯´åç§°ã€é“¾æ¥ã€ä½œè€…ã€æ›´æ–°æ—¶é—´ã€æœ€æ–°ç« èŠ‚ã€å°é¢ç­‰ã€‚soï¼Œå³é”®é¡µé¢ â†’ å®¡æŸ¥å…ƒç´ ï¼Œç„¶åå‘ç°æœç´¢ç»“æœåœ¨idä¸ºâ€newscontentâ€çš„divä¸‹é¢çš„ulçš„liä¸­ï¼Œé™¤äº†å°é¢é“¾æ¥ã€‚</p>
<p><img alt="www-image" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/react-online-reader/search-result.png"></p>
<p>ä½¿ç”¨cheerioè·å–åˆ°ulä¸­æ‰€æœ‰çš„æœç´¢ç»“æœï¼Œå¹¶æ”¾å…¥æ•°ç»„ä¸­ï¼Œè¿”å›ç»™å‰ç«¯é¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/searchArticle'</span>, (req, res) => {</span><br><span class="line">  request.get(<span class="string">`http://www.snwx8.com/modules/article/search.php?searchkey=<span class="subst">${urlencode(req.query.searchKey, <span class="string">'gbk'</span>)}</span>`</span>)</span><br><span class="line">    .charset(<span class="string">'gbk'</span>)</span><br><span class="line">    .end(<span class="function">(<span class="params">error, resp</span>) =></span> {</span><br><span class="line">      <span class="keyword">if</span> (error) {</span><br><span class="line">        log.error(<span class="string">'search error : '</span>, error);</span><br><span class="line">        res.status(<span class="number">200</span>);</span><br><span class="line">        res.send({</span><br><span class="line">          result: <span class="number">1</span>,</span><br><span class="line">          error,</span><br><span class="line">        });</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">const</span> $ = cheerio.load(resp.text);</span><br><span class="line">        <span class="keyword">const</span> item = [];</span><br><span class="line">        $(<span class="string">'#newscontent .l ul li'</span>).each(<span class="function">(<span class="params">idx, element</span>) =></span> {</span><br><span class="line">          <span class="keyword">const</span> $element = $(element);</span><br><span class="line">          item.push({</span><br><span class="line">            classify: $element.find(<span class="string">'.s1'</span>).text().replace(<span class="regexp">/å°è¯´|\[|]/g</span>, <span class="string">''</span>),</span><br><span class="line">            articleName: $element.find(<span class="string">'.s2 a'</span>).text(),</span><br><span class="line">            articleLink: $element.find(<span class="string">'.s2 a'</span>).attr(<span class="string">'href'</span>),</span><br><span class="line">            latestCharterName: $element.find(<span class="string">'.s3 a'</span>).text(),</span><br><span class="line">            latestCharterLink: $element.find(<span class="string">'.s3 a'</span>).attr(<span class="string">'href'</span>),</span><br><span class="line">            authorName: $element.find(<span class="string">'.s4 a'</span>).text(),</span><br><span class="line">            authorLink: $element.find(<span class="string">'.s4 a'</span>).attr(<span class="string">'href'</span>),</span><br><span class="line">            updateTime: $element.find(<span class="string">'.s5'</span>).text(),</span><br><span class="line">          });</span><br><span class="line">        });</span><br><span class="line">        res.status(<span class="number">200</span>);</span><br><span class="line">        res.send({</span><br><span class="line">          result: <span class="number">0</span>,</span><br><span class="line">          content: item,</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
<p>å¥½äº†ï¼Œè·å–å®Œæœç´¢çš„ç»“æœåï¼Œæˆ‘ä»¬çš„æœç´¢æ¥å£æœåŠ¡ç«¯éƒ¨åˆ†ä¹Ÿå°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥è¦åšçš„æ˜¯ï¼šå½“ç‚¹å‡»äº†å°è¯´ç»“æœä¹‹åï¼Œè·å–å°è¯´ç« èŠ‚åˆ—è¡¨æ¥å£ä»¥åŠè·å–ç« èŠ‚å†…å®¹æ¥å£ï¼Œå®ç°çš„æ­¥éª¤ä¸è·å–æœç´¢ç»“æœä¸€è‡´ã€‚</p>
<p><a href="https://github.com/Ash-sc/online-reader/blob/master/server/article/article.js" target="_blank" rel="noopener">å…·ä½“ä»£ç </a>ã€‚</p>
<h2 id="å‰ç«¯ç•Œé¢"><a href="#å‰ç«¯ç•Œé¢" class="headerlink" title="å‰ç«¯ç•Œé¢"></a>å‰ç«¯ç•Œé¢</h2><p>æ¥å£å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‰ç«¯ç•Œé¢çš„å¼€å‘äº†ï¼Œç›¸æ¯”äºä½¿ç”¨åŸç”Ÿjså†™ç•Œé¢ï¼Œä½¿ç”¨æ¡†æ¶çš„å¥½å¤„åœ¨äºï¼šä¸ç”¨èŠ±å¤§é‡çš„åŠŸå¤«å»å†™domæ“ä½œï¼Œä½ åªéœ€è¦åœ¨åˆé€‚çš„æ—¶å€™å»è°ƒç”¨æ¥å£ï¼Œç„¶åæ¡†æ¶ä¼šæ ¹æ®ä½ è¿”å›çš„æ•°æ®æ¸²æŸ“é¡µé¢ã€‚</p>
<p>å…³äºReactè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚ç”±äºåªæ˜¯ä¸€ä¸ªç®€å•çš„å°è¯´é˜…è¯»å™¨ï¼Œå¹¶ä¸éœ€è¦ä½¿ç”¨å¤ªè¿‡å¤æ‚çš„é¡¹ç›®ç»“æ„ï¼šåƒ<code>react-router</code>ã€<code>redux</code>è¿™ç±»çš„ç»„ä»¶å…¶å®éƒ½æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ä¸è¿‡æˆ‘åœ¨é¡¹ç›®ä¸­è¿˜æ˜¯ä½¿ç”¨äº†æˆ‘ä¹ æƒ¯ä½¿ç”¨çš„é¡¹ç›®ç»“æ„ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒå¤æ‚ï¼Œå®é™…ä¸Šæœ€ä¸»è¦çš„éƒ¨åˆ†éƒ½åœ¨<code>src/js/components/Article</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ ·å¼æ–‡ä»¶ä¸º<code>src/assets/sass/pages/_article.scss</code>ã€‚</p>
<p>å…·ä½“çš„Reactä»£ç ï¼Œåœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€è§£é‡Šäº†ï¼Œç»„ä»¶æ‹†åˆ†å¾—å¾ˆç»†ï¼Œå‡½æ•°å‘½åä¹Ÿéƒ½æ˜¯æ ¹æ®ä½œç”¨è¯­ä¹‰åŒ–å‘½åçš„ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‚</p>
<p>è¯´ä¸€è¯´æˆ‘åœ¨å‰ç«¯å¼€å‘ä¸­é‡åˆ°çš„æ¯”è¾ƒæœ‰æ„æ€çš„äº‹æƒ…å§ã€‚</p>
<h3 id="å…³äºåŠ¨ç”»"><a href="#å…³äºåŠ¨ç”»" class="headerlink" title="å…³äºåŠ¨ç”»"></a>å…³äºåŠ¨ç”»</h3><p>ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ°åˆ°å¥½å¤„çš„åŠ¨ç”»æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¯ä»¥æå‡åœºæ™¯è¿‡æ¸¡è¿‡ç¨‹ä¸­çš„ç”¨æˆ·ä½“éªŒï¼Œç”±äºæ˜¯å•é¡µé¢çš„åº”ç”¨ï¼ŒåŠŸèƒ½ä¹Ÿå¾ˆæ¯”è¾ƒå•ä¸€ï¼Œæ‰€ä»¥æˆ‘åœ¨é¡µé¢ä¸­ç”¨åˆ°çš„åŠ¨ç”»æ¨¡å¼ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯å¹³ç§»æ•ˆæœåŠ ä¸Šå®½åº¦å˜åŒ–ä»¥åŠæ¸æ˜¾æ¸éšæ•ˆæœï¼Œé€šè¿‡cssä¸­çš„transitionå®ç°ã€‚</p>
<p>å®½åº¦çš„å˜åŒ–ï¼Œæœ€åˆçš„é€‰æ‹©çš„æ˜¯ç›´æ¥ç”¨widthæ¥å˜åŒ–ï¼Œåæ¥å‘ç°ï¼šå½“domèŠ‚ç‚¹æ¯”è¾ƒåºå¤§æ—¶ï¼Œå¯¹widthåštransitionä¼šé€ æˆç•Œé¢å¡é¡¿ï¼Œååˆ†å½±å“ä½“éªŒã€‚</p>
<p>åŸå› åœ¨äºï¼š<strong>èŠ‚ç‚¹çš„widthæ˜¯é€šè¿‡CPUæ¥è®¡ç®—çš„ï¼Œå˜åŒ–çš„domèŠ‚ç‚¹æ•°è¶Šå¤šï¼Œè®¡ç®—éœ€è¦çš„èµ„æºè¶Šå¤šï¼Œä¹Ÿå°±è¶Šå®¹æ˜“é€ æˆå¡é¡¿äº†ï¼ŒCPUèµ„æºæ˜¯éå¸¸å®è´µçš„ï¼Œå°½é‡ä¸è¦åœ¨åŠ¨ç”»ä¸Šä½¿ç”¨å®ƒ</strong>ã€‚</p>
<p>è§£å†³åŠæ³•ï¼šä¸ä½¿ç”¨widthå˜åŒ–æ¥å®ç°åŠ¨ç”»ï¼Œè½¬è€Œä½¿ç”¨transform:translate()ã€‚åŒºåˆ«åœ¨äº: <strong>transformå¹¶æ²¡æœ‰æ”¹å˜å…ƒç´ çš„å®½é«˜ç­‰è®¡ç®—å±æ€§ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå ç”¨CPUèµ„æºï¼Œè€Œæ˜¯ä½¿ç”¨GPUèµ„æºæ¥å®Œæˆ</strong>ã€‚</p>
<p>èƒŒæ™¯é¢œè‰²å˜åŒ–å’Œå­—ä½“é¢œè‰²å˜åŒ–å±äºæ¯”è¾ƒå¥½å®ç°ä½†æ˜¯éå¸¸å®ç”¨çš„åŠŸèƒ½ã€‚</p>
<p>é¡µé¢ç”ŸæˆäºŒç»´ç åŠŸèƒ½çš„è¯ï¼Œæˆ‘è¿™è¾¹é€‰æ‹©çš„æ˜¯é€šè¿‡<code>qrcode.react</code>ç»„ä»¶æ¥ç”ŸæˆurläºŒç»´ç ï¼Œå…·ä½“çš„æ‰‹æœºç«¯é¡µé¢æš‚æ—¶è¿˜æ²¡æœ‰å®ç°ï¼Œç•™ä¸€ä¸ªTODOå§ã€‚</p>
<p>é¡¹ç›®å®ç°æ•ˆæœå›¾ï¼š</p>
<p><img alt="preview-image" class="lazy" data-src="http://web-site-files.ashshen.cc/gitHub/online-reader-preview.gif"></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Ash</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://ashshen.cc/2017/07/04/react-node-online-reader/">https://ashshen.cc/2017/07/04/react-node-online-reader/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react/">react</a><a class="post-meta__tags" href="/tags/nodejs/">nodejs</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img lazy" data-src="/img/alipay.png"><div class="post-qr-code__desc">alipay</div></div><div class="post-qr-code-item"><img class="post-qr-code__img lazy" data-src="/img/wechat.png"><div class="post-qr-code__desc">wechat</div></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2017/07/05/electron-react-online-reader/"><i class="fa fa-chevron-left">  </i><span>ä½¿ç”¨Electronæ„å»ºReactæ¡Œé¢åº”ç”¨</span></a></div><div class="next-post pull-right"><a href="/2017/06/11/mac-install-nvm/"><span>macä¸‹nvmå®‰è£…ä¸ä½¿ç”¨</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://ashshen.cc/2017/07/04/react-node-online-reader/';
  this.page.identifier = '2017/07/04/react-node-online-reader/';
  this.page.title = 'React+Node.jsåœ¨çº¿å°è¯´é˜…è¯»å™¨';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'ashshen-cc' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://ashshen-cc.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">Â©2017 - 2019 By Ash</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><script>document.addEventListener("DOMContentLoaded", function() {
  var lazyloadImages;

  if ("IntersectionObserver" in window) {
    lazyloadImages = document.querySelectorAll(".lazy");
    var imageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var image = entry.target;
          image.src = image.dataset.src;
          image.classList.remove("lazy");
          imageObserver.unobserve(image);
        }
      });
    });

    lazyloadImages.forEach(function(image) {
      imageObserver.observe(image);
    });
  } else {  
    var lazyloadThrottleTimeout;
    lazyloadImages = document.querySelectorAll(".lazy");
    
    function lazyload () {
      if(lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }    

      lazyloadThrottleTimeout = setTimeout(function() {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
        });
        if(lazyloadImages.length == 0) { 
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }

    document.addEventListener("scroll", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  }
})
</script></body></html>
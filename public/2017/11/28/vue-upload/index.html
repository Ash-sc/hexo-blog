<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <meta name="author" content="Ashshen, mail@ashshen.cc">
  
  
  
  <title>ä¸€ä¸ªç®€å•çš„vueæ–‡ä»¶ä¸Šä¼ ç»„ä»¶ | å°±åœ¨è®°å¿†é‡Œç”»ä¸€ä¸ªçŒ¹ğŸ¦”</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="å‰ç«¯,vue,vue,file-upload,">
  

  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="/css/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/commentjs.css">

  <script src="/js/util.js"></script>

  

  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  

  
    <script src="https://cdn.bootcss.com/marked/0.5.2/marked.min.js"></script>
    <script src="https://cdn.bootcss.com/timeago.js/3.0.2/timeago.min.js"></script>
    <script src="https://cdn.bootcss.com/spin.js/2.3.2/spin.min.js"></script>
    <script src="https://cdn.bootcss.com/highlight.js/9.13.1/highlight.min.js"></script>
    <script src="/js/commentjs.js"></script>
  
</head>
<body>

  

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">ASH'S FOLDING PAGE</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a href="/" target="_self">
              ä¸»é¡µ
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a href="/archives/" target="_self">
              å½’æ¡£
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/categories/">
          
            <a href="/categories/" target="_self">
              åˆ†ç±»
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/tags/">
          
            <a href="/tags/" target="_self">
              æ ‡ç­¾
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/about/">
          
            <a href="/about/" target="_self">
              å…³äº
            </a>
          
        </li>
      
        <li class="nav-item" data-path="">
          
            <a href="javascript:void(0);" v-else="">æŠ“åˆ°æˆ‘</a>
            <ul class="nav-menu--dropdown">
              
                <li>
                  <a href="https://github.com/Ash-sc" target="_blank">
                    Github
                  </a>
                </li>
              
            </ul>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>


      <div class="container post-index">

  <div class="post">
  <h1 class="article-title">
    <span>ä¸€ä¸ªç®€å•çš„vueæ–‡ä»¶ä¸Šä¼ ç»„ä»¶</span>
  </h1>
  <div class="article-top-meta">
    <span>
      å‘å¸ƒ : 
      2017-11-28
    </span>
    
      <span>
        åˆ†ç±» : 
          <a href="/categories/å‰ç«¯/">
            å‰ç«¯
          </a>
      </span>
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <p><img alt="img" class="lazy" data-src="http://web-site-files.ashshen.cc/blog-header-images/nature-25.jpg"></p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Ash-sc/vue-simple-upload" target="_blank" rel="noopener">https://github.com/Ash-sc/vue-simple-upload</a></p>
<p>ç¤ºä¾‹åœ°å€ï¼š<a href="http://demo.2017017.xyz/vue-demo/#/vue-simple-file-upload" target="_blank" rel="noopener">http://demo.2017017.xyz/vue-demo/#/vue-simple-file-upload</a></p>
<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æ—¢ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼Œé‚£ä¹ˆåªè¦ä¿è¯å¿…è¦çš„åŠŸèƒ½ç‚¹éƒ½æœ‰å°±è¡Œäº†ï¼š</p>
<ol>
<li><p>å•æ–‡ä»¶ä¸Šä¼  ï¼ˆåç»­å¯è€ƒè™‘æ‰©å±•ä¸ºå¤šæ–‡ä»¶ï¼Œ// 2017-11-30 å·²æ·»åŠ è¯¥åŠŸèƒ½ï¼‰</p>
</li>
<li><p>æ”¯æŒæ–‡ä»¶ç±»å‹é™åˆ¶</p>
</li>
<li><p>æ”¯æŒå®æ—¶ä¸Šä¼ è¿›åº¦ä»¥åŠä¸Šä¼ é€Ÿåº¦</p>
</li>
<li><p>æ”¯æŒé¢å¤–çš„formDataæ•°æ®</p>
</li>
</ol>
<p>å½“ç„¶ï¼Œè¿˜æœ‰åƒæ”¯æŒæ‰‹åŠ¨å¼€å§‹ã€æ”¯æŒä¸Šä¼ å–æ¶ˆã€æ‹–æ‹½ä¸Šä¼ ç­‰åŠŸèƒ½ã€‚ç”±äºå½“å‰çš„ä½¿ç”¨åœºæ™¯ä¸­å¹¶æ²¡æœ‰è¦æ±‚æ­¤ç±»åŠŸèƒ½ï¼Œæ‰€ä»¥ä¹Ÿå°±æ”¾åœ¨åç»­ç‰ˆæœ¬çš„todoListä¸­äº†ã€‚</p>
<h2 id="ç»„ä»¶è¿è¡Œé€»è¾‘"><a href="#ç»„ä»¶è¿è¡Œé€»è¾‘" class="headerlink" title="ç»„ä»¶è¿è¡Œé€»è¾‘"></a>ç»„ä»¶è¿è¡Œé€»è¾‘</h2><p>å†™ç»„ä»¶ä¹‹å‰ï¼Œå…ˆæ•´ç†å‡ºç»„ä»¶çš„è¿è¡Œæ­¥éª¤å’Œéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œè¿™å¯¹ä¹‹åçš„ç¼–ç ç¯èŠ‚ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ï¼Œå¤§è‡´å¦‚ä¸‹</p>
<p><img alt="flow" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/vue-upload-component/upload-component-logic.png"></p>
<p>okï¼Œå¤§è‡´ç½—åˆ—å‡ºç»„ä»¶çš„è¿è¡Œæ­¥éª¤ä»¥åŠæ³¨æ„äº‹é¡¹åï¼Œå¼€å§‹ç¼–å†™ç»„ä»¶çš„ä»£ç ã€‚</p>
<h2 id="ä»£ç æ¡†æ¶"><a href="#ä»£ç æ¡†æ¶" class="headerlink" title="ä»£ç æ¡†æ¶"></a>ä»£ç æ¡†æ¶</h2><p>ç»„ä»¶é¡¹ç›®çš„æ¡†æ¶çš„è¯ï¼Œä½¿ç”¨webpack-simpleå°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªï¼Œå…·ä½“æ­¥éª¤çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œgoogleã€‚å½“ç„¶ï¼Œä¹Ÿç›´æ¥å¯ä»¥ä»æˆ‘çš„Githubé¡¹ç›®ä¸­cloneç°æˆçš„ä»£ç ï¼Œç„¶åä¿®æ”¹src/libä¸‹çš„æ–‡ä»¶å³å¯ã€‚</p>
<h2 id="å…³é”®ç‚¹å®ç°"><a href="#å…³é”®ç‚¹å®ç°" class="headerlink" title="å…³é”®ç‚¹å®ç°"></a>å…³é”®ç‚¹å®ç°</h2><p><em>é¦–å…ˆ</em>ï¼Œå¯¹äºæ­¥éª¤å›¾ä¸­ç¬¬ä¸€æ­¥çš„ä¸Šä¼ æŒ‰é’®ï¼Œæˆ‘ç›´æ¥å†™åœ¨äº†templateä¸­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<slot>æ’æ§½ï¼Œå¯¹äºä¸éœ€è¦æŒ‰é’®çš„ç”¨æˆ·è€Œè¨€ï¼Œå¯ä»¥ä½¿ç”¨csséšè—ç„¶åå†ç”¨jsæ¨¡æ‹Ÿç‚¹å‡»äº‹ä»¶å³å¯ã€‚</slot></p>
<p>å¯¹äºç¬¬ä¸€æ­¥åˆ°ç¬¬äºŒæ­¥çš„<em>ä¸¤ä¸ªæ³¨æ„ç‚¹</em>çš„å¤„ç†ï¼š</p>
<ol>
<li><p>ç”±äºinputæ ‡ç­¾çš„<em>acceptå±æ€§</em>å¹¶ä¸èƒ½å®Œå…¨é™åˆ¶ç”¨æˆ·çš„æ–‡ä»¶é€‰æ‹©è¡Œä¸ºï¼ˆç”¨æˆ·ä»ç„¶å¯ä»¥é€‰æ‹©é™åˆ¶ä¹‹å¤–çš„æ–‡ä»¶ï¼Œå¹¶ä¸”ä¼šå½•å…¥inputçš„å€¼ä¸­ï¼‰ï¼Œæˆ‘åœ¨ç¬¬äºŒæ­¥åˆ°ç¬¬ä¸‰æ­¥ä¹‹é—´ï¼ŒXHRä¸Šä¼ ä¹‹å‰ï¼Œä¼šé’ˆå¯¹é€‰æ‹©çš„æ–‡ä»¶ç±»å‹é‡æ–°ä½¿ç”¨jsæ ¡éªŒä¸€æ¬¡ï¼Œå¯¹äºä¸ç¬¦åˆçš„æ–‡ä»¶ç±»å‹ï¼Œä¸ä¼šè§¦å‘XHRè¯·æ±‚ã€‚</p>
</li>
<li><p>ä¸ºäº†é˜²æ­¢ç”±äºæµè§ˆå™¨çš„æ–‡ä»¶é€‰æ‹©æ¡†å…·æœ‰å“åº”æ—¶é—´è€Œå¯¼è‡´çš„<em>å¤šä¸ªæ–‡ä»¶é€‰æ‹©æ¡†</em>é—®é¢˜ï¼Œæˆ‘é‡‡ç”¨çš„åŠæ³•æ˜¯ï¼šåœ¨ç»„ä»¶çš„dataä¸­è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ï¼Œæ–‡ä»¶é€‰æ‹©å®Œæˆ(change)åï¼Œé‡ç½®æ ‡å¿—ä½ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿä¼šæœ‰é—®é¢˜ï¼šå¦‚æœç‚¹å‡»äº†â€å–æ¶ˆâ€ï¼Œé‚£ä¹ˆæ–‡ä»¶é€‰æ‹©inputçš„changeäº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ï¼Œæ‰€ä»¥æˆ‘åœ¨ä¸Šä¼ æŒ‰é’®ä¸Šä¹Ÿæ·»åŠ äº†ä¸€ä¸ªbluräº‹ä»¶ï¼Œå½“äº‹ä»¶è§¦å‘æ—¶ï¼Œé‡ç½®æ ‡å¿—ä½ã€‚</p>
</li>
</ol>
<p>é€‰æ‹©å®Œæˆæ–‡ä»¶åï¼Œinputçš„changeäº‹ä»¶è§¦å‘ï¼Œç„¶åé€šè¿‡eventå‚æ•°è·å–åˆ°å·²ç»é€‰æ‹©çš„æ–‡ä»¶ã€‚</p>
<p>PSï¼šè¿™é‡Œè¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼Œåœ¨é€‰æ‹©å®Œæ–‡ä»¶ï¼Œå¹¶è·å–åˆ°å·²é€‰æ‹©æ–‡ä»¶ä¹‹åï¼Œéœ€è¦æ¸…ç©ºinputçš„valueä»¥ä¿è¯ä¸‹ä¸€æ¬¡é€‰æ‹©ç›¸åŒçš„æ–‡ä»¶ä»ç„¶å¯ä»¥è§¦å‘changeäº‹ä»¶ï¼ˆå½“æ–‡ä»¶ä¸Šä¼ å¤±è´¥æ—¶ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦é‡æ–°é€‰æ‹©ç›¸åŒçš„æ–‡ä»¶ï¼‰ã€‚</p>
<p>ç„¶åæˆ‘å°†é€‰æ‹©çš„æ–‡ä»¶å¯¼å…¥åˆ°dataä¸­å®šä¹‰çš„æ–‡ä»¶ä¿¡æ¯æ•°ç»„fileInfoListä¸­ï¼ˆæ˜¯çš„ï¼Œæ•°ç»„ã€‚å› ä¸ºè¦è€ƒè™‘åˆ°ä¹‹åçš„å¤šæ–‡ä»¶æ‰©å±•ï¼‰ã€‚</p>
<p>fileInfoListä¸­çš„å…ƒç´ å­˜å‚¨çš„ä¸ä»…ä»…æ˜¯æ–‡ä»¶ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬ä¸€ä¸ªå…·æœ‰å”¯ä¸€æ€§çš„idï¼ˆæ—¶é—´æˆ³åŠ éšæœºæ•°ï¼Œç”¨æ¥ä½œä¸ºæ ‡å¿—ä½ï¼Œä¸ºä¹‹åçš„abortåŠŸèƒ½åšå‡†å¤‡ï¼‰ï¼ŒåŒ…æ‹¬ä¸€ä¸ªtypeï¼ˆå€¼ä¸ºâ€waitingâ€ã€â€uploadingâ€ã€â€successâ€ã€â€failâ€ã€â€abortâ€(æ·»åŠ å–æ¶ˆä¸Šä¼ åæ–°å¢)ä¸­çš„ä¸€ä¸ªï¼Œä¸ºæ‰‹åŠ¨å¼€å§‹åŠŸèƒ½åšå‡†å¤‡ï¼‰ï¼ŒåŒ…æ‹¬ä¸€ä¸ªç”¨æ¥æè¿°ä¸Šä¼ è¿›åº¦çš„progressã€ä¸Šä¼ é€Ÿåº¦æè¿°uploadSpeedï¼Œä»¥åŠæ–‡ä»¶åå±æ€§nameã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯XHRä¸Šä¼ çš„éƒ¨åˆ†ï¼Œç›´æ¥ä½¿ç”¨jsçš„XMLHttpRequestæ–¹æ³•å‘é€httpè¯·æ±‚ã€‚åŒæ ·ï¼Œä¹Ÿåœ¨ç»„ä»¶çš„dataä¸­å®šä¹‰äº†ä¸€ä¸ªxhrObjç”¨æ¥å­˜æ”¾ä¸Šä¼ çš„XMLHttpRequestå®ä¾‹å¯¹è±¡ï¼ˆä¸ºäº†æ–¹ä¾¿abortåŠŸèƒ½çš„å®ç°ï¼‰ã€‚</p>
<p>éå†ä¸Šä¸€æ­¥ä¸­å®šä¹‰çš„fileInfoListï¼ŒæŠŠé€‰æ‹©çš„æ–‡ä»¶ä¾æ¬¡ä¸Šä¼ ï¼Œå¹¶ä¸”æŠŠidä½œä¸ºkeyï¼ŒXMLHttpRequestå®ä¾‹ä½œä¸ºvalueå­˜å…¥xhrObjä¸­ã€‚</p>
<p><em>ä¸Šä¼ è¿›åº¦çš„å®ç°æ–¹æ³•ï¼š</em></p>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªuploadingæ–¹æ³•ç”¨äºæ›´æ–°fileInfoListå…ƒç´ ä¸­çš„progresså±æ€§</p>
<p>ç„¶ååœ¨XMLHttpRequestçš„onprogressæ–¹æ³•ä¸­è°ƒç”¨uploadingæ–¹æ³•ï¼Œonprogressæ–¹æ³•å¸¦æœ‰ä¸€ä¸ªprogresså‚æ•°ï¼Œå…¶ä¸­å°±åŒ…å«loadedï¼Œä¹Ÿå°±æ˜¯å·²ç»ä¸Šä¼ çš„æ–‡ä»¶sizeï¼Œé™¤ä»¥æ–‡ä»¶æ€»sizeå°±å¾—åˆ°äº†ä¸Šä¼ çš„è¿›åº¦ã€‚</p>
<p><em>ä¸Šä¼ é€Ÿåº¦çš„å®ç°ï¼š</em></p>
<p>ä¸Šä¼ é€Ÿåº¦çš„å®ç°ç¨å¾®è¦éº»çƒ¦ä¸€ç‚¹ï¼›ç”±äºå·²ç»ä¸Šä¼ çš„æ–‡ä»¶sizeæ˜¯å¯ä»¥è·å–åˆ°çš„ï¼Œè€Œåœ¨onprogressè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸¤æ¬¡è§¦å‘uploadingæ–¹æ³•çš„æ—¶é—´é—´éš”æ˜¯ä¸ä¸€å®šçš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨dataä¸­å®šä¹‰ä¸€ä¸ªå¯¹è±¡uploadedSizeï¼Œç”¨äºå­˜æ”¾æ¯ä¸€ä¸ªæ–‡ä»¶åœ¨uploadingæ–¹æ³•è§¦å‘æ—¶å·²ç»ä¸Šä¼ çš„sizeä»¥åŠå½“å‰æ—¶é—´æˆ³ï¼Œäºæ˜¯åœ¨ä¸‹ä¸€æ¬¡è§¦å‘uploadingæ–¹æ³•æ—¶ï¼Œç”¨ä¸Šä¼ çš„sizeä¹‹å·®é™¤ä»¥æ—¶é—´æˆ³ä¹‹å·®å¾—åˆ°çš„å°±æ˜¯ä¸Šä¼ çš„è¿›åº¦ï¼ˆPSï¼šåŒæ—¶ä¹Ÿè¦æ›´æ–°uploadedSizeï¼‰ã€‚</p>
<p><em>æ•°æ®ä¼ å‡ºåˆ°çˆ¶ç»„ä»¶ï¼š</em></p>
<p>æ¯å½“uploadingæ–¹æ³•è§¦å‘ä»è€Œæ”¹å˜fileInfoListæ—¶ï¼Œä½¿ç”¨vueç»„ä»¶è‡ªå¸¦çš„$emitæ–¹æ³•å°†fileInfoListå˜åŠ¨é€šçŸ¥çˆ¶ç»„ä»¶ã€‚</p>
<p><em>ä¸Šä¼ å¤±è´¥å’Œä¸Šä¼ å®Œæˆï¼š</em></p>
<p>æ–‡ä»¶ä¸Šä¼ æˆåŠŸä»¥åŠä¸Šä¼ å¤±è´¥ï¼Œæ˜¯é€šè¿‡XMLHttpRequestçš„onreadystatechangeæ–¹æ³•æ¥åˆ¤æ–­çš„ï¼Œå½“æ–‡ä»¶ä¸Šä¼ æˆåŠŸæˆ–è€…å¤±è´¥åï¼Œå°†è¯¥æ–‡ä»¶ä¸Šä¼ è¯·æ±‚çš„reponseStringå­˜å…¥fileInfoListå¯¹åº”å…ƒç´ çš„responseå±æ€§ä¸­ï¼Œå¹¶ä¿®æ”¹å…¶typeå±æ€§ä¸ºâ€successâ€æˆ–â€failâ€ï¼Œç„¶åé€šè¿‡$emitæ–¹æ³•é€šçŸ¥çˆ¶ç»„ä»¶ã€‚</p>
<h2 id="ç»„ä»¶ä½¿ç”¨æ–¹æ³•"><a href="#ç»„ä»¶ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ç»„ä»¶ä½¿ç”¨æ–¹æ³•"></a>ç»„ä»¶ä½¿ç”¨æ–¹æ³•</h2><p>æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ€»å…±æœ‰ä¸¤ä¸ªpropsï¼šoptionsä¸progress-updateã€‚</p>
<p>optionsä¸ºé…ç½®é¡¹å…¥å£ã€‚</p>
<p>progress-updateä¸ºç»„ä»¶ä¸Šä¼ è¿›åº¦å‡ºå£ã€‚</p>
<p>å…·ä½“ä½¿ç”¨æ–¹æ³•è§ï¼š<a href="https://github.com/Ash-sc/vue-simple-upload/blob/master/README.md" target="_blank" rel="noopener">README.md</a></p>
<p><em>PSï¼š 2017-11-29  // todo: å¤šæ–‡ä»¶ä¸Šä¼ ã€ä¸Šä¼ å–æ¶ˆã€æ‹–æ‹½ä¸Šä¼ ã€æ‰‹åŠ¨å¼€å§‹ã€‚</em></p>
<h2 id="æ·»åŠ å¤šæ–‡ä»¶ä¸Šä¼ ï¼šï¼ˆ2017-11-30ï¼‰"><a href="#æ·»åŠ å¤šæ–‡ä»¶ä¸Šä¼ ï¼šï¼ˆ2017-11-30ï¼‰" class="headerlink" title="æ·»åŠ å¤šæ–‡ä»¶ä¸Šä¼ ï¼šï¼ˆ2017-11-30ï¼‰"></a>æ·»åŠ å¤šæ–‡ä»¶ä¸Šä¼ ï¼šï¼ˆ2017-11-30ï¼‰</h2><p>ç”±äºä¹‹å‰çš„ä»£ç ä¸­å·²ç»é¢„ç•™äº†å¤šæ–‡ä»¶ä¸Šä¼ çš„ç›¸å…³æ¥å£ï¼ˆæ–‡ä»¶ä¿¡æ¯ä½¿ç”¨æ•°ç»„å­˜æ”¾ã€ç»„ä»¶ä¼ å‡ºå‚æ•°ä¸ºæ•°ç»„ï¼‰ï¼Œæ‰€ä»¥æ·»åŠ å¤šæ–‡ä»¶ä¸Šä¼ å‡ ä¹æ²¡æœ‰èŠ±è´¹ä»€ä¹ˆåŠ›æ°”ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨optionsä¸­å¢åŠ æ”¯æŒå±æ€§â€multipleâ€ï¼Œç±»å‹ä¸ºå¸ƒå°”ç±»å‹ï¼›åŒæ—¶è®¾å®šprosä¸­é»˜è®¤å€¼ä¸ºfalseï¼ˆé˜²æ­¢ç”¨æˆ·æœªå®šä¹‰æ”¹å±æ€§å€¼æŠ¥é”™ï¼‰ï¼›ç„¶åå†å°†è¯¥å±æ€§ç»‘å®šåˆ°inputä¸Šå³å¯ã€‚</p>
<h2 id="æ·»åŠ ä¸Šä¼ å–æ¶ˆåŠŸèƒ½ï¼šï¼ˆ2017-12-01ï¼‰"><a href="#æ·»åŠ ä¸Šä¼ å–æ¶ˆåŠŸèƒ½ï¼šï¼ˆ2017-12-01ï¼‰" class="headerlink" title="æ·»åŠ ä¸Šä¼ å–æ¶ˆåŠŸèƒ½ï¼šï¼ˆ2017-12-01ï¼‰"></a>æ·»åŠ ä¸Šä¼ å–æ¶ˆåŠŸèƒ½ï¼šï¼ˆ2017-12-01ï¼‰</h2><p>è€ƒè™‘åˆ°ä¸Šä¼ å–æ¶ˆåŠŸèƒ½çš„æ‰©å±•ï¼Œæˆ‘åœ¨åˆå§‹ç‰ˆæœ¬ä¸­å°±å·²ç»å°†XHRå®ä¾‹ç¼“å­˜åœ¨äº†dataä¸­ï¼Œæ‰©å±•ä¸Šä¼ å–æ¶ˆåŠŸèƒ½åªéœ€è¦è°ƒç”¨å¯¹åº”XHRå®ä¾‹ä¸­çš„aborté’©å­å³å¯ã€‚</p>
<p>å…³äºä¸Šä¼ å–æ¶ˆåŠŸèƒ½çš„ä½¿ç”¨ï¼š</p>
<p>æˆ‘æœ€åˆçš„æƒ³æ³•æ˜¯ç”¨æˆ·å°†éœ€è¦å–æ¶ˆçš„é¡¹id(ä¼ å…¥â€allâ€åˆ™è¡¨ç¤ºæ‰€æœ‰)ä½œä¸ºpropsä¼ ç»™ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨æ„ŸçŸ¥propså˜åŒ–ä»è€Œabortè¯·æ±‚ï¼›ä¸è¿‡è¿™æ ·ä¸€æ¥å¾ˆå¯èƒ½å‡ºç°ç”¨æˆ·å¿˜è®°é‡ç½®propsè€Œå¯¼è‡´çš„æ— æ³•ä¸Šä¼ ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™æ ·çš„bugï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šç”±ç”¨æˆ·é€šè¿‡refå»è‡ªè¡Œè°ƒç”¨ç»„ä»¶å†…éƒ¨çš„abortæ–¹æ³•ã€‚</p>
<p>PSï¼šæ·»åŠ äº†abortåï¼ŒfileInfoListä¸­çš„å…ƒç´ åŒæ—¶ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªtypeï¼šâ€abortâ€ç”¨äºåŒºåˆ†æ‰‹åŠ¨å–æ¶ˆä¸ä¸Šä¼ å¤±è´¥ã€‚</p>
<h2 id="æ·»åŠ æ‰‹åŠ¨å¼€å§‹ä¸Šä¼ åŠŸèƒ½ï¼šï¼ˆ2017-12-28ï¼‰"><a href="#æ·»åŠ æ‰‹åŠ¨å¼€å§‹ä¸Šä¼ åŠŸèƒ½ï¼šï¼ˆ2017-12-28ï¼‰" class="headerlink" title="æ·»åŠ æ‰‹åŠ¨å¼€å§‹ä¸Šä¼ åŠŸèƒ½ï¼šï¼ˆ2017-12-28ï¼‰"></a>æ·»åŠ æ‰‹åŠ¨å¼€å§‹ä¸Šä¼ åŠŸèƒ½ï¼šï¼ˆ2017-12-28ï¼‰</h2><p>2017å¹´12æœˆ28æ—¥ï¼Œåœ¨ç‰ˆæœ¬v1.2.0ä¸­æ·»åŠ äº†ç”¨æˆ·å¯æ‰‹åŠ¨é€‰æ‹©å¼€å§‹ä¸Šä¼ åŠŸèƒ½ã€‚å½“ç„¶ï¼Œä¸ºäº†ä¿æŒç‰ˆæœ¬çš„å‘ä¸‹å…¼å®¹ä»¥åŠä½¿ç”¨çš„ç®€æ˜“æ€§ï¼Œè¯¥åŠŸèƒ½é»˜è®¤æ˜¯å…³é—­çš„ã€‚</p>
<p>ä½¿ç”¨æ‰‹åŠ¨å¼€å§‹ä¸Šä¼ çš„åŠŸèƒ½é¦–å…ˆè¦åœ¨configä¸­å°†â€autoStartâ€è®¾ç½®ä¸ºfalseã€‚ä¸ä¸Šä¼ å–æ¶ˆåŠŸèƒ½ä¸€æ ·ï¼ŒåŒæ ·æ˜¯é€šè¿‡refå»è°ƒç”¨ç»„ä»¶å†…éƒ¨çš„startUploadæ–¹æ³•ï¼Œä¼ å…¥éœ€è¦å¼€å§‹ä¸Šä¼ çš„æ–‡ä»¶idï¼ˆä¸ä¼ åˆ™è¡¨ç¤ºå¼€å§‹ä¸Šä¼ æ‰€æœ‰ç­‰å¾…ä¸Šä¼ çš„æ–‡ä»¶ï¼‰ã€‚</p>

    </div>
  </div>
  
    <div class="copy-right">
      <div class="markdown-body">
        <blockquote>
        
        
          æœ¬æ–‡ä½œè€… : Ash Shen <br>
        
        åŸæ–‡é“¾æ¥ : <a href="">https://ashshen.cc/2017/11/28/vue-upload/</a><br>
        ç‰ˆæƒå£°æ˜ : æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
        </blockquote>
      </div>
    </div>
  
  
  
    <meta name="generator" content="Hexo 3.8.0"><div class="social-share" style="margin-top: -2rem" data-wechat-qrcode-title="<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>" data-wechat-qrcode-helper="<p>å¾®ä¿¡å³ä¸Šè§’, æ‰«ä¸€æ‰«åˆ†äº«</p>" data-sites="qq, weibo, wechat, douban, google, facebook, twitter">
  <span style="color: #6b7487; font-size: 1.4rem;">åˆ†äº«åˆ°: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async></script>
  

  
    <meta name="generator" content="Hexo 3.8.0"><div id="reward">
  
    <p id="reward-meta">æ‚¨çš„èµèµï¼Œæ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±</p>
  
  <button id="reward-btn">
    
    <span>èµèµä¸€ä¸‹</span>
  </button>
  <div id="reward-qrcode">
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img lazy" alt="å¾®ä¿¡æ‰«ä¸€æ‰«" data-src="/images/wechat.png">
        <p class="qrcode-meta">å¾®ä¿¡æ‰«ä¸€æ‰«</p>
      </div>
    
      <div class="reward-qrcode--container">
        <img class="qrcode-img lazy" alt="æ”¯ä»˜å®æ‰«ä¸€æ‰«" data-src="/images/alipay.png">
        <p class="qrcode-meta">æ”¯ä»˜å®æ‰«ä¸€æ‰«</p>
      </div>
    
  </div>

</div>

<script>
  (() => {
    let button = document.querySelector('#reward-btn'),
      qrcode = document.querySelector('#reward-qrcode'),
      display = false;
    
    button.addEventListener('click', () => {
      qrcode.style.display = display ? 'none' : 'block'
      display = !display
    }, false)
  })()
</script><script>document.addEventListener("DOMContentLoaded", function() {
  var lazyloadImages;

  if ("IntersectionObserver" in window) {
    lazyloadImages = document.querySelectorAll(".lazy");
    var imageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var image = entry.target;
          image.src = image.dataset.src;
          image.classList.remove("lazy");
          imageObserver.unobserve(image);
        }
      });
    });

    lazyloadImages.forEach(function(image) {
      imageObserver.observe(image);
    });
  } else {  
    var lazyloadThrottleTimeout;
    lazyloadImages = document.querySelectorAll(".lazy");
    
    function lazyload () {
      if(lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }    

      lazyloadThrottleTimeout = setTimeout(function() {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
        });
        if(lazyloadImages.length == 0) { 
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }

    document.addEventListener("scroll", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  }
})
</script>
  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>æ ‡ç­¾: 
          
          <span class="span--tag">
            <a href="/tags/vue/">
              #vue
            </a>
          </span>
          
          <span class="span--tag">
            <a href="/tags/file-upload/">
              #file-upload
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>



  <nav class="post-navigation">
    <!-- 
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        ä¸Šä¸€ç¯‡:
        <a href="/2017/11/07/vue-notebook/" target="_self">ç”¨vueæ’¸äº†ä¸€å‘Evernoteç½‘é¡µç‰ˆ</a>
      </div>
     -->
    
      <div class="nav-pre">
        ä¸Šä¸€ç¯‡:
        <a href="/2017/12/06/fe-page-communication/" target="_self">å‰ç«¯iframeè·¨åŸŸé€šä¿¡</a>
        <i class="iconfont icon-pre"></i>
      </div>
    
    
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2017/11/07/vue-notebook/" target="_self">ç”¨vueæ’¸äº†ä¸€å‘Evernoteç½‘é¡µç‰ˆ</a>
        <i class="iconfont icon-next"></i>
      </div>
    
    <!-- 
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2017/12/06/fe-page-communication/" target="_self">å‰ç«¯iframeè·¨åŸŸé€šä¿¡</a>
        <i class="iconfont icon-next"></i>
      </div>
     -->
  </nav>

  
    <div class="comment-title"><i class="iconfont icon-footprint"></i> ç•™ä¸‹è¶³è¿¹ <i class="iconfont icon-footprint"></i></div>
<div id="comment-thread"></div>
<div id="loading-spin"></div>

<script>
  if( true ) {

    $(document).ready(function () {
      getComments({
        "type": "github",
        "user": "Ash-sc",
        "repo": "blog-comments",
        "clientID": "",
        "clientSecret": "",
        "no_comment": "è¯¥é¡µé¢è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«å»è¯„è®ºå§!",
        "go_to_comment": "å»è¯„è®º",
        "issue_title": "ä¸€ä¸ªç®€å•çš„vueæ–‡ä»¶ä¸Šä¼ ç»„ä»¶",
        "btn_class": "button",
        "comments_target": "#comment-thread"
      });
      marked.setOptions({
        "highlight": function (code, lang) {
          return hljs.highlightAuto(code).value;
        }
      });
      function mark() {
        var markdowns = document.getElementsByClassName("markdown");
        for (var i = 0; i < markdowns.length; ++i){
          if (markdowns[i].innerHTML) {
            markdowns[i].innerHTML = marked(markdowns[i].innerHTML);
          }
        }
      }
      window.addEventListener("DOMContentLoaded", mark, false);
      window.addEventListener("load", mark, false);
    });
  }
</script>
<script>document.addEventListener("DOMContentLoaded", function() {
  var lazyloadImages;

  if ("IntersectionObserver" in window) {
    lazyloadImages = document.querySelectorAll(".lazy");
    var imageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var image = entry.target;
          image.src = image.dataset.src;
          image.classList.remove("lazy");
          imageObserver.unobserve(image);
        }
      });
    });

    lazyloadImages.forEach(function(image) {
      imageObserver.observe(image);
    });
  } else {  
    var lazyloadThrottleTimeout;
    lazyloadImages = document.querySelectorAll(".lazy");
    
    function lazyload () {
      if(lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }    

      lazyloadThrottleTimeout = setTimeout(function() {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
        });
        if(lazyloadImages.length == 0) { 
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }

    document.addEventListener("scroll", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  }
})
</script>
  
</div>



      <footer>
  <p class="site-info">
    åšå®¢å·²èŒèŒå“’è¿è¡Œ<span id="time-to-now"></span><span class="my-face">(â—'â—¡'â—)ï¾‰â™¥</span>
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With ğŸ’— | Powered by <a href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2017, 2, 19).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "å¤©" + hour + "å°æ—¶" + minute + "åˆ†é’Ÿ" + second + "ç§’";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //å…³é—­jsåŠ è½½è¿‡ç¨‹ä¿¡æ¯
      messageStyle: "none", //ä¸æ˜¾ç¤ºä¿¡æ¯
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //è¡Œå†…å…¬å¼é€‰æ‹©ç¬¦
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //æ®µå†…å…¬å¼é€‰æ‹©ç¬¦
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //é¿å¼€æŸäº›æ ‡ç­¾
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //å¯é€‰å­—ä½“
        showMathMenu: false //å…³é—­å³å‡»èœå•æ˜¾ç¤º
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="/js/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>


    
  <script>document.addEventListener("DOMContentLoaded", function() {
  var lazyloadImages;

  if ("IntersectionObserver" in window) {
    lazyloadImages = document.querySelectorAll(".lazy");
    var imageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var image = entry.target;
          image.src = image.dataset.src;
          image.classList.remove("lazy");
          imageObserver.unobserve(image);
        }
      });
    });

    lazyloadImages.forEach(function(image) {
      imageObserver.observe(image);
    });
  } else {  
    var lazyloadThrottleTimeout;
    lazyloadImages = document.querySelectorAll(".lazy");
    
    function lazyload () {
      if(lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }    

      lazyloadThrottleTimeout = setTimeout(function() {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
        });
        if(lazyloadImages.length == 0) { 
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }

    document.addEventListener("scroll", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  }
})
</script>


</body></html>
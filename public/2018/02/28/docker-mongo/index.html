<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="ä½¿ç”¨dockerå®‰è£…å’Œå¯åŠ¨mongo"><meta name="keywords" content="docker,mongodb"><meta name="author" content="Ash"><meta name="copyright" content="Ash"><title>ä½¿ç”¨dockerå®‰è£…å’Œå¯åŠ¨mongo | å°±åœ¨è®°å¿†é‡Œç”»ä¸€ä¸ªçŒ¹ğŸ¦”</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é¦–å…ˆ"><span class="toc-number">1.</span> <span class="toc-text">é¦–å…ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mongoé•œåƒä¸æ–°å»ºå®¹å™¨"><span class="toc-number">2.</span> <span class="toc-text">mongoé•œåƒä¸æ–°å»ºå®¹å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é…ç½®mongodb"><span class="toc-number">3.</span> <span class="toc-text">é…ç½®mongodb</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mongoå®¢æˆ·ç«¯"><span class="toc-number">4.</span> <span class="toc-text">mongoå®¢æˆ·ç«¯</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img class="lazy" data-src="/img/avatar.jpg"></div><div class="author-info__name text-center">Ash</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/Ash-sc">Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">29</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">43</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">23</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">å°±åœ¨è®°å¿†é‡Œç”»ä¸€ä¸ªçŒ¹ğŸ¦”</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">ä½¿ç”¨dockerå®‰è£…å’Œå¯åŠ¨mongo</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-02-28</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/docker/">docker</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/docker/mongodb/">mongodb</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2018/02/28/docker-mongo/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2018/02/28/docker-mongo/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><meta name="generator" content="Hexo 3.8.0"><p>é‰´äºåœ¨windowsä¸‹å®‰è£…mongoçš„æ›²æŠ˜ç»å†ï¼ˆæ— åŠ›åæ§½ï¼‰ï¼Œæœ€ç»ˆå†³å®šä½¿ç”¨dockeræ¥å®‰è£…mongoã€‚dockerä¸­è¿è¡Œçš„mongoä¸æœ¬åœ°å®‰è£…çš„mongoå¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å®ç°åœ¨æœ¬åœ°ç»´æŠ¤dbæ–‡ä»¶ï¼Œå®‰è£…è¿‡ç¨‹æ›´åŠ ç®€æ´ï¼ˆä¸ç”¨æ»¡ä¸–ç•Œçš„æ‰¾å®‰è£…æ–‡ä»¶äº†ã€ä¹Ÿä¸ç”¨å»å®˜ç½‘å¡«å†™è¡¨å•æ³¨å†Œè´¦å·äº†ï¼‰ã€‚</p>
<a id="more"></a>
<h2 id="é¦–å…ˆ"><a href="#é¦–å…ˆ" class="headerlink" title="é¦–å…ˆ"></a>é¦–å…ˆ</h2><p>é¦–å…ˆï¼Œä½ éœ€è¦å»dockerå®˜ç½‘ä¸‹ä¸€ä¸ªdockerå®¢æˆ·ç«¯ï¼Œå®‰è£…å®Œæˆä¹‹åï¼Œè®¾ç½®dockeré•œåƒæºä¸ºå›½å†…é•œåƒï¼ˆå›½å¤–é•œåƒçš„é€Ÿåº¦å˜›ï¼Œå‘µå‘µå“’â€¦ï¼‰ã€‚</p>
<p>æˆ‘è¿™è¾¹çš„è¯ï¼ŒåŠ äº†è¿™ä¸‰ä¸ªé•œåƒæºï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registry.docker-cn.com</span><br><span class="line">https://docker.mirrors.ustc.edu.cn</span><br><span class="line">https://hub-mirror.c.163.com</span><br></pre></td></tr></tbody></table></figure>
<p><img alt="docker-install" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/docker/docker-mirrors.png"></p>
<p>åº”ç”¨ï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚</p>
<h2 id="mongoé•œåƒä¸æ–°å»ºå®¹å™¨"><a href="#mongoé•œåƒä¸æ–°å»ºå®¹å™¨" class="headerlink" title="mongoé•œåƒä¸æ–°å»ºå®¹å™¨"></a>mongoé•œåƒä¸æ–°å»ºå®¹å™¨</h2><p>å®‰è£…å®Œdockerä¹‹åï¼Œé€šè¿‡docker pull mongoè·å–åˆ°mongoé•œåƒã€‚</p>
<p>pullå®Œæˆä¹‹åå¯ä»¥é€šè¿‡docker imagesæŸ¥çœ‹æœ¬åœ°æ‹¥æœ‰çš„é•œåƒåˆ—è¡¨ã€‚</p>
<p><img alt="windows-shell" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/docker/docker-images.png"></p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡mongoé•œåƒæ¥æ–°å»ºä¸€ä¸ªå®¹å™¨äº†ã€‚</p>
<p>è¿™é‡Œï¼Œå¦‚æœä½ æœ¬åœ°æœ‰å®‰è£…gitçš„è¯ï¼Œå¯ä»¥åœ¨æ–‡ä»¶å¤¹ä¸­æˆ–è€…æ¡Œé¢â€œå³é”®â€ï¼Œç„¶åä½¿ç”¨â€œgit bashâ€æ¥æ‰“å¼€gitå‘½ä»¤è¡Œå·¥å…·ï¼›å¦‚æœæœ¬åœ°æ²¡æœ‰å®‰è£…gitçš„è¯ï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£…ä¸€ä¸ªgitï¼Œgitçš„å®‰è£…ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æ¥å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ä¸€ä»¶å®‰è£…å³å¯ã€‚</p>
<p>PSï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨git bashï¼Ÿ å› ä¸ºwindowsä¸‹çš„gitå®¢æˆ·ç«¯ä¼šè‡ªå¸¦ä¸€ä¸ªå«<strong>mingw</strong>çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ‰§è¡Œç®€å•çš„shellå‘½ä»¤ï¼Œä¹‹åç”¨åˆ°çš„å‘½ä»¤éœ€è¦å®ƒã€‚</p>
<p>åœ¨git bashä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–°å»ºä¸€ä¸ªmongoçš„å®¹å™¨ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name <è‡ªå®šä¹‰å®¹å™¨å> -p 27017:27017 -v F:/docker/mongodb:/data/db -d mongo --auth // ï¼ˆmacç”¨æˆ·å¯ä»¥åŠ ä¸Šsudoï¼‰<!--è‡ªå®šä¹‰å®¹å™¨å--></span><br></pre></td></tr></tbody></table></figure>
<p><code>-p 27017:27017</code>è¡¨ç¤ºï¼šå‰é¢çš„27017æ˜¯æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºçš„ç«¯å£ï¼ˆå¦‚æœä½ æœ¬åœ°27017è¢«å ç”¨ï¼Œå¯ä»¥é€‰æ‹©å…¶ä»–ç«¯å£ï¼‰ï¼Œåé¢çš„27017æ˜¯dockerå®¹å™¨ä¸­è¿è¡Œçš„mongoç«¯å£ï¼Œè¿™ä¸ªæ˜¯å›ºå®šçš„ã€‚</p>
<p><code>-v F:/docker/mongodb:/data/db</code>è¡¨ç¤ºï¼šå†’å·å‰é¢æ˜¯æœ¬åœ°ç»´æŠ¤çš„æ•°æ®åº“æ–‡ä»¶æ‰€åœ¨ï¼Œåé¢çš„æ˜¯å®¹å™¨ä¸­mongoæœåŠ¡æ•°æ®åº“æ–‡ä»¶ï¼Œå®é™…åº”ç”¨ä¸­ä¸€èˆ¬éƒ½ä¼šå°†æ•°æ®åº“æ–‡ä»¶æ˜ å°„åˆ°æœ¬åœ°ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚</p>
<p>æ–°å»ºå®¹å™¨å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨<code>docker ps</code>æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨åˆ—è¡¨ï¼Œä½¿ç”¨<code>docker ps -a</code>å¯ä»¥æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„å®¹å™¨åˆ—è¡¨ã€‚</p>
<p><img alt="window-shell-2" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/docker/docker-ps.png"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆšåˆšè¿è¡Œçš„å®¹å™¨åœ¨åˆ—è¡¨ä¸­ï¼ˆmongoTestï¼‰ï¼Œä½¿ç”¨<code>docker stop mongoTest</code>å‘½ä»¤åœæ­¢è¿è¡Œå®¹å™¨ï¼Œæ›´å¤šå¸¸è§dockerå‘½ä»¤ï¼Œå¯ä»¥çœ‹<a href="http://www.youruncloud.com/docker/1_37.html" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id="é…ç½®mongodb"><a href="#é…ç½®mongodb" class="headerlink" title="é…ç½®mongodb"></a>é…ç½®mongodb</h2><p>mongodbæœåŠ¡å·²ç»å¯åŠ¨èµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯mongodbé…ç½®ç›¸å…³äº†ï¼ˆé…ç½®ç”¨æˆ·ç­‰ï¼‰ã€‚</p>
<p>é¦–å…ˆåœ¨git bashä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼šï¼ˆå®¹å™¨åç§°è¯·è‡ªè¡Œæ›¿æ¢ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it <è‡ªå®šä¹‰å®¹å™¨å> mongo admin<!--è‡ªå®šä¹‰å®¹å™¨å--></span><br></pre></td></tr></tbody></table></figure>
<p>PSï¼šåœ¨è¿™é‡Œï¼Œwindowsç”¨æˆ·æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤æ—¶ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ã€‚</p>
<p><img alt="shell-3" class="lazy" data-src="http://web-site-files.ashshen.cc/blog/docker/windows-error.png"></p>
<p>è¿™æ—¶å€™åœ¨å‘½ä»¤å‰é¢åŠ ä¸Šâ€œmintty â€å˜æˆâ€œmintty docker â€¦â€¦â€ï¼Œå°±å¯ä»¥æ­£å¸¸æ–°å»ºå®¹å™¨äº†ã€‚</p>
<p>ç„¶åï¼Œä¼šè¿›å…¥åˆ°mongodbçš„å‘½ä»¤è¡ŒçŠ¶æ€ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createUser({ user: <span class="string">'<user>'</user></span>, <span class="built_in">pwd</span>: <span class="string">'<password>'</password></span>, roles: [ { role: <span class="string">'userAdminAnyDatabase'</span>, db: <span class="string">'admin'</span> } ]});</span><br></pre></td></tr></tbody></table></figure>
<p>mongodbæç¤ºç”¨æˆ·åˆ›å»ºæˆåŠŸï¼Œä»¥åæƒ³è¦ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½ç™»å½•mongoå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤<br></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it <your-name> mongo -u <user> -p <password> --authenticationDatabase admin</password></user></your-name></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>å‡è®¾æˆ‘ä»¬é¡¹ç›®ä¸­ç”¨åˆ°çš„æ•°æ®åº“ä¸ºtestï¼Œä¸Šé¢åˆ›å»ºçš„ç®¡ç†å‘˜æ˜¯æ²¡æœ‰testæ•°æ®åº“çš„è¯»å†™æƒé™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å†å»ºä¸€ä¸ªç”¨æˆ·ã€‚</p>
<p>åœ¨å‘½ä»¤è¡Œä¸­ä¾æ¬¡è¾“å…¥ï¼š<br></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use <span class="built_in">test</span>; // æ–°å»º<span class="built_in">test</span>æ•°æ®åº“</span><br><span class="line">db.createUser({user: <span class="string">'<user>'</user></span>,<span class="built_in">pwd</span>: <span class="string">'<password>'</password></span>, roles: [{role: <span class="string">'readWrite'</span>, db: <span class="string">'test'</span>}]}); // åˆ›å»ºæ–°ç”¨æˆ·</span><br><span class="line">db.auth(<span class="string">'<user>'</user></span>, <span class="string">'<password>'</password></span>); // åˆ‡æ¢åˆ°æ–°å»ºçš„ç”¨æˆ·</span><br><span class="line">db.test.insert({name: <span class="string">'test db'</span>}); // ç¡®å®šç”¨æˆ·æ˜¯å¦æ–°å»ºæˆåŠŸ</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>æ–°å»ºç”¨æˆ·å®Œæˆåï¼Œå°±å¯ä»¥ä½¿ç”¨æ–°å»ºçš„ç”¨æˆ·å¯†ç è¿æ¥æ“ä½œmongoäº†ã€‚</p>
<h2 id="mongoå®¢æˆ·ç«¯"><a href="#mongoå®¢æˆ·ç«¯" class="headerlink" title="mongoå®¢æˆ·ç«¯"></a>mongoå®¢æˆ·ç«¯</h2><p>mongoçš„å®¢æˆ·ç«¯çš„è¯ï¼Œwindowså’Œmacéƒ½å¯ä»¥ä½¿ç”¨Robo 3Tï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://robomongo.org/ï¼›å½“ç„¶ï¼Œä½ å¦‚æœæœ‰ä½¿ç”¨IDEAå®¶æ—çš„ç¼–è¾‘å™¨çš„è¯ï¼Œå¯ä»¥ç›´æ¥è£…mongoæ’ä»¶ï¼š`mongo4idea`ã€‚" target="_blank" rel="noopener">https://robomongo.org/ï¼›å½“ç„¶ï¼Œä½ å¦‚æœæœ‰ä½¿ç”¨IDEAå®¶æ—çš„ç¼–è¾‘å™¨çš„è¯ï¼Œå¯ä»¥ç›´æ¥è£…mongoæ’ä»¶ï¼š`mongo4idea`ã€‚</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Ash</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://ashshen.cc/2018/02/28/docker-mongo/">https://ashshen.cc/2018/02/28/docker-mongo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/docker/">docker</a><a class="post-meta__tags" href="/tags/mongodb/">mongodb</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/04/04/fe-note/"><i class="fa fa-chevron-left">  </i><span>å‰ç«¯ç¬”è®°ï¼ˆæŒç»­æ›´æ–°ï¼‰</span></a></div><div class="next-post pull-right"><a href="/2018/01/24/html5-dialog/"><span>HTML5.2å‘å¸ƒâ€”â€”ä½ è¦çš„æ¨¡æ€æ¡†æ¥äº†</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://ashshen.cc/2018/02/28/docker-mongo/';
  this.page.identifier = '2018/02/28/docker-mongo/';
  this.page.title = 'ä½¿ç”¨dockerå®‰è£…å’Œå¯åŠ¨mongo';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'ashshen-cc' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://ashshen-cc.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">Â©2017 - 2019 By Ash</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text"><a href="http://www.beian.miit.gov.cn/">æµ™ICPå¤‡17006549å·-1</a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><script>document.addEventListener("DOMContentLoaded", function() {
  var lazyloadImages;

  if ("IntersectionObserver" in window) {
    lazyloadImages = document.querySelectorAll(".lazy");
    var imageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          var image = entry.target;
          image.src = image.dataset.src;
          image.classList.remove("lazy");
          imageObserver.unobserve(image);
        }
      });
    });

    lazyloadImages.forEach(function(image) {
      imageObserver.observe(image);
    });
  } else {  
    var lazyloadThrottleTimeout;
    lazyloadImages = document.querySelectorAll(".lazy");
    
    function lazyload () {
      if(lazyloadThrottleTimeout) {
        clearTimeout(lazyloadThrottleTimeout);
      }    

      lazyloadThrottleTimeout = setTimeout(function() {
        var scrollTop = window.pageYOffset;
        lazyloadImages.forEach(function(img) {
            if(img.offsetTop < (window.innerHeight + scrollTop)) {
              img.src = img.dataset.src;
              img.classList.remove('lazy');
            }
        });
        if(lazyloadImages.length == 0) { 
          document.removeEventListener("scroll", lazyload);
          window.removeEventListener("resize", lazyload);
          window.removeEventListener("orientationChange", lazyload);
        }
      }, 20);
    }

    document.addEventListener("scroll", lazyload);
    window.addEventListener("resize", lazyload);
    window.addEventListener("orientationChange", lazyload);
  }
})
</script></body></html>